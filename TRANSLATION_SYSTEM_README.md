# Papago ë²ˆì—­ ì‹œìŠ¤í…œ êµ¬í˜„ ì™„ë£Œ âœ…

## ğŸ’¡ ì‹œìŠ¤í…œ ê°œìš”

**ê´€ë¦¬ì ìˆ˜ë™ ì„ íƒ ë°©ì‹ì˜ ë²ˆì—­ ì‹œìŠ¤í…œ**
- ê´€ë¦¬ìê°€ ë²ˆì—­ ëŒ€ê¸°ì—´ì„ ë³´ê³  ì§ì ‘ ê²Œì„ì„ ì„ íƒí•˜ì—¬ ë²ˆì—­
- BGG ë­í‚¹ ê¸°ë°˜ìœ¼ë¡œ ì •ë ¬ëœ ëŒ€ê¸°ì—´ ì œê³µ
- Papago APIë¥¼ ì‚¬ìš©í•œ í•œêµ­ì–´ ë²ˆì—­

## ğŸ“‹ êµ¬í˜„ ì™„ë£Œ í•­ëª©

### 1. âœ… DB ë§ˆì´ê·¸ë ˆì´ì…˜
**íŒŒì¼**: `migrations/004_add_translation_fields.sql`

ì¶”ê°€ëœ ì»¬ëŸ¼:
- `descriptionKo` TEXT - í•œêµ­ì–´ ê²Œì„ ì„¤ëª…
- `translatedAt` TIMESTAMP - ë²ˆì—­ ì™„ë£Œ ì‹œê°
- `popularityScore` INT - ì¸ê¸°ë„ ì ìˆ˜ (í–¥í›„ ìë™í™” ì‹œ ì‚¬ìš© ê°€ëŠ¥)

ì¶”ê°€ëœ í…Œì´ë¸”:
- `translationStats` - ì›”ë³„ ë²ˆì—­ í†µê³„ (ë¬¸ì ìˆ˜, ê²Œì„ ìˆ˜, ë¹„ìš© ì¶”ì )

### 2. âœ… Papago ë²ˆì—­ ì„œë¹„ìŠ¤
**íŒŒì¼**: `src/services/papagoService.ts`

êµ¬í˜„ëœ ê¸°ëŠ¥:
- `translateText()` - ê¸°ë³¸ í…ìŠ¤íŠ¸ ë²ˆì—­ (ìµœëŒ€ 5,000ì)
- `translateLongText()` - ê¸´ í…ìŠ¤íŠ¸ ë¶„í•  ë²ˆì—­ (5,000ì ì´ˆê³¼)
- `translateGameName()` - ê²Œì„ ì œëª© ë²ˆì—­
- `translateGameDescription()` - ê²Œì„ ì„¤ëª… ë²ˆì—­
- `translateTerms()` - ì¹´í…Œê³ ë¦¬/ë©”ì»¤ë‹ˆì¦˜ ì¼ê´„ ë²ˆì—­
- Rate limiting ìë™ ëŒ€ê¸° (0.5ì´ˆ~1ì´ˆ)

### 3. âœ… ë²ˆì—­ ë°°ì¹˜ ì„œë¹„ìŠ¤
**íŒŒì¼**: `src/services/translationBatchService.ts`

êµ¬í˜„ëœ ê¸°ëŠ¥:
- `translateGame()` - ë‹¨ì¼ ê²Œì„ ë²ˆì—­
- `translateGames()` - ì—¬ëŸ¬ ê²Œì„ ì¼ê´„ ë²ˆì—­
- `getTranslationQueue()` - ë²ˆì—­ ëŒ€ê¸°ì—´ ì¡°íšŒ (BGG ë­í‚¹ìˆœ)
- `getMonthlyStats()` - ì›”ë³„ ë²ˆì—­ í†µê³„
- `recalculatePopularityScores()` - ì¸ê¸°ë„ ì ìˆ˜ ì¬ê³„ì‚° (í–¥í›„ ìë™í™” ì‹œ ì‚¬ìš©)

ì¸ê¸°ë„ ì ìˆ˜ ê³„ì‚° ê³µì‹ (í–¥í›„ ìë™í™” ì‹œ ì‚¬ìš©):
```typescript
popularityScore = (owned * 0.5) + (wishing * 1) + (10000 - bggRankOverall)
```

### 4. âœ… Repository í™•ì¥
**íŒŒì¼**: `src/repositories/gameRepository.ts`

ì¶”ê°€ëœ í•¨ìˆ˜:
- `findUntranslatedGames()` - ë¯¸ë²ˆì—­ ê²Œì„ ì¡°íšŒ (BGG ë­í‚¹ìˆœ)
- `findGamesByPopularity()` - ì¸ê¸°ë„ìˆœ ê²Œì„ ì¡°íšŒ
- `updateTranslation()` - ê²Œì„ ë²ˆì—­ ì •ë³´ ì—…ë°ì´íŠ¸
- `updatePopularityScore()` - ë‹¨ì¼ ê²Œì„ ì¸ê¸°ë„ ì ìˆ˜ ì—…ë°ì´íŠ¸ (í–¥í›„ ìë™í™” ì‹œ)
- `updateAllPopularityScores()` - ì „ì²´ ê²Œì„ ì¸ê¸°ë„ ì ìˆ˜ ì¬ê³„ì‚° (í–¥í›„ ìë™í™” ì‹œ)
- `getTranslationStats()` - ì›”ë³„ ë²ˆì—­ í†µê³„ ì¡°íšŒ
- `updateTranslationStats()` - ì›”ë³„ ë²ˆì—­ í†µê³„ ì—…ë°ì´íŠ¸

### 5. âœ… ìŠ¤ì¼€ì¤„ëŸ¬ í†µí•©
**íŒŒì¼**: `src/services/schedulerService.ts`

í˜„ì¬ ìŠ¤ì¼€ì¤„:
- **ë§¤ì¼ 03:00** - BGG Hot List ë™ê¸°í™”
- **ë§¤ì£¼ ì¼ìš”ì¼ 04:00** - ì¸ê¸°ë„ ì ìˆ˜ ì¬ê³„ì‚° (í–¥í›„ ìë™í™” ì‹œ ì‚¬ìš©)

**ì°¸ê³ **: ë²ˆì—­ì€ ìë™ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©°, ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.

### 6. âœ… API ì—”ë“œí¬ì¸íŠ¸
**íŒŒì¼**: 
- `src/routes/gameRoutes.ts`
- `src/controllers/gameController.ts`

ì¶”ê°€ëœ ì—”ë“œí¬ì¸íŠ¸:

#### POST `/api/v1/games/{bggId}/translate`
- ë‹¨ì¼ ê²Œì„ ë²ˆì—­ (ê´€ë¦¬ììš©, ì¸ì¦ í•„ìš”)
- BGG IDë¡œ ê²Œì„ ì¡°íšŒ í›„ ë²ˆì—­ ì‹¤í–‰

#### POST `/api/v1/games/translate-batch`
- ì—¬ëŸ¬ ê²Œì„ ì¼ê´„ ë²ˆì—­ (ê´€ë¦¬ììš©, ì¸ì¦ í•„ìš”)
- Body: `{ "gameIds": [1, 2, 3, ...] }`
- ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ ì‹¤í–‰

#### GET `/api/v1/games/translation-queue`
- ë²ˆì—­ ëŒ€ê¸°ì—´ ì¡°íšŒ (ì¸ì¦ ë¶ˆí•„ìš”)
- Query: `?limit=50` (ê¸°ë³¸ê°’)
- **BGG ë­í‚¹ìˆœ**ìœ¼ë¡œ ë¯¸ë²ˆì—­ ê²Œì„ ëª©ë¡ ë°˜í™˜

#### GET `/api/v1/games/translation-stats`
- ì›”ë³„ ë²ˆì—­ í†µê³„ ì¡°íšŒ (ì¸ì¦ ë¶ˆí•„ìš”)
- Query: `?yearMonth=2026-02` (ì„ íƒì‚¬í•­)
- ì´ ë¬¸ì ìˆ˜, ê²Œì„ ìˆ˜, ì˜ˆìƒ ë¹„ìš© ë°˜í™˜

### 7. âœ… í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
**íŒŒì¼**: `src/config/env.ts`

ì¶”ê°€ëœ ì„¤ì •:
```typescript
papago?: {
  clientId: string;
  clientSecret: string;
}
```

### 8. âœ… ëª¨ë¸ ì—…ë°ì´íŠ¸
**íŒŒì¼**: `src/models/Game.ts`

ì¶”ê°€ëœ í•„ë“œ:
- `descriptionKo: string | null` - ëª¨ë“  Game ê´€ë ¨ ì¸í„°í˜ì´ìŠ¤ì— ì¶”ê°€
- `translatedAt: Date | null`
- `popularityScore: number` (í–¥í›„ ìë™í™” ì‹œ ì‚¬ìš©)

### 9. âœ… ì„œë¹„ìŠ¤ í†µí•©
**íŒŒì¼**: `src/services/gameService.ts`

ë³€ê²½ì‚¬í•­:
- `descriptionKo` í•„ë“œë¥¼ GameDetailResponseì— í¬í•¨

## ğŸš€ ë°°í¬ ë°©ë²•

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ì— Papago API í‚¤ ì¶”ê°€:
```bash
PAPAGO_CLIENT_ID=your_naver_cloud_client_id
PAPAGO_CLIENT_SECRET=your_naver_cloud_client_secret
```

### 2. DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
Railway MySQLì— ì ‘ì†í•˜ì—¬ ì‹¤í–‰:
```bash
mysql -h [RAILWAY_HOST] -u root -p [DB_NAME] < migrations/004_add_translation_fields.sql
```

### 3. ì„œë²„ ë°°í¬
```bash
git add .
git commit -m "feat: Papago ë²ˆì—­ ì‹œìŠ¤í…œ êµ¬í˜„"
git push origin main
```

Railwayê°€ ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤.

### 4. ì„œë²„ ì‹œì‘
ì„œë²„ê°€ ì‹œì‘ë˜ë©´ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ìë™ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤ (ë²ˆì—­ ìë™ ì‹¤í–‰ì€ ì—†ìŒ).

## ğŸ“Š ì‚¬ìš© ë°©ë²•

### ê´€ë¦¬ì ë²ˆì—­ ì›Œí¬í”Œë¡œìš°

#### 1ë‹¨ê³„: ë²ˆì—­ ëŒ€ê¸°ì—´ ì¡°íšŒ

ë¨¼ì € ë²ˆì—­ì´ í•„ìš”í•œ ê²Œì„ ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤:

```bash
GET /api/v1/games/translation-queue?limit=50
```

ëŒ€ê¸°ì—´ì€ **BGG ë­í‚¹ ìˆœ**ìœ¼ë¡œ ì •ë ¬ë˜ì–´ ì¸ê¸° ê²Œì„ì´ ìš°ì„  í‘œì‹œë©ë‹ˆë‹¤.

#### 2ë‹¨ê³„: ë²ˆì—­í•  ê²Œì„ ì„ íƒ ë° ì‹¤í–‰

ëŒ€ê¸°ì—´ì„ ë³´ê³  ë²ˆì—­í•  ê²Œì„ì„ ì„ íƒí•œ í›„ ì‹¤í–‰í•©ë‹ˆë‹¤.

**ë‹¨ì¼ ê²Œì„ ë²ˆì—­**
```bash
POST /api/v1/games/174430/translate
Authorization: Bearer {token}
```

**ì—¬ëŸ¬ ê²Œì„ ì¼ê´„ ë²ˆì—­**
```bash
POST /api/v1/games/translate-batch
Authorization: Bearer {token}
Content-Type: application/json

{
  "gameIds": [1, 2, 3, 4, 5]
}
```

#### 3ë‹¨ê³„: ë²ˆì—­ í†µê³„ í™•ì¸

ì›”ë³„ ë²ˆì—­ í†µê³„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
GET /api/v1/games/translation-stats?yearMonth=2026-02
```

### ëŒ€ê¸°ì—´ ìƒì„¸ ì •ë³´

```bash
GET /api/v1/games/translation-queue?limit=50
```

ëŒ€ê¸°ì—´ ì‘ë‹µ ì˜ˆì‹œ:
```json
{
  "success": true,
  "data": {
    "total": 50,
    "queue": [
      {
        "rank": 1,
        "gameId": 123,
        "bggId": 174430,
        "nameEn": "Gloomhaven",
        "nameKo": null,
        "hasDescriptionKo": false,
        "popularityScore": 12500,
        "owned": 25000,
        "wishing": 3000,
        "bggRankOverall": 1
      },
      ...
    ]
  }
}
```

**ì •ë ¬ ê¸°ì¤€**:
1. BGG ì „ì²´ ë­í‚¹ (ë‚®ì„ìˆ˜ë¡ ìš°ì„ )
2. ì†Œìœ ì ìˆ˜ (ë§ì„ìˆ˜ë¡ ìš°ì„ )
3. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ìˆ˜ (ë§ì„ìˆ˜ë¡ ìš°ì„ )

## âš™ï¸ ë¹„ìš© ê´€ë¦¬

- **ë²ˆì—­ëŸ‰**: ê´€ë¦¬ìê°€ í•„ìš”ì— ë”°ë¼ ìˆ˜ë™ìœ¼ë¡œ ì¡°ì ˆ
- **ì˜ˆìƒ ë¹„ìš©**: ê²Œì„ë‹¹ ì•½ 1,000-3,000ì (ì„¤ëª… ê¸¸ì´ì— ë”°ë¼ ì°¨ì´)
- **í†µê³„ ì¶”ì **: `translationStats` í…Œì´ë¸”ì— ìë™ ê¸°ë¡
- **ê¶Œì¥**: ì›” ì˜ˆì‚°ì„ ì •í•˜ê³  í†µê³„ APIë¡œ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

## ğŸ” ì£¼ì˜ì‚¬í•­

1. **Papago API í‚¤ ë°œê¸‰ í•„ìš”**: ë„¤ì´ë²„ í´ë¼ìš°ë“œì—ì„œ ë°œê¸‰
2. **Rate Limiting**: ìë™ìœ¼ë¡œ 0.5~1ì´ˆ ëŒ€ê¸° ì²˜ë¦¬ë¨
3. **5,000ì ì œí•œ**: ê¸´ í…ìŠ¤íŠ¸ëŠ” ìë™ìœ¼ë¡œ ë¶„í•  ë²ˆì—­
4. **ì¤‘ë³µ ë²ˆì—­ ë°©ì§€**: ì´ë¯¸ ë²ˆì—­ëœ ê²Œì„ì€ ëŒ€ê¸°ì—´ì—ì„œ ìë™ ì œì™¸
5. **ìˆ˜ë™ ê´€ë¦¬**: ë²ˆì—­ì€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©°, ê´€ë¦¬ìê°€ ì§ì ‘ ì„ íƒ

## ğŸ“ í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ìˆ˜ë™ ë²ˆì—­ í…ŒìŠ¤íŠ¸
Swagger UIì—ì„œ:
1. ë¡œê·¸ì¸ (`/api/v1/auth/google`)
2. `POST /api/v1/games/174430/translate` ì‹¤í–‰
3. ê²°ê³¼ í™•ì¸

### 2. ëŒ€ê¸°ì—´ í™•ì¸
```bash
GET /api/v1/games/translation-queue?limit=10
```

ëŒ€ê¸°ì—´ì—ì„œ ë²ˆì—­í•  ê²Œì„ì„ ì„ íƒí•©ë‹ˆë‹¤.

## âœ¨ í–¥í›„ ê°œì„  ì‚¬í•­ (ì„ íƒì‚¬í•­)

1. **ìë™ ë²ˆì—­ ìŠ¤ì¼€ì¤„ëŸ¬**: ì¸ê¸°ë„ ì ìˆ˜ ê¸°ë°˜ ìë™ ë²ˆì—­ (í•„ìš” ì‹œ)
2. **GPT ìš”ì•½ ì¶”ê°€**: ê¸´ ì„¤ëª…ì„ ì§§ê²Œ ìš”ì•½
3. **ì¹´í…Œê³ ë¦¬/ë©”ì»¤ë‹ˆì¦˜ ë²ˆì—­**: ìš©ì–´ ë²ˆì—­ ì¶”ê°€
4. **ë²ˆì—­ í’ˆì§ˆ ê´€ë¦¬**: ë²ˆì—­ ê²°ê³¼ ê²€ìˆ˜ ì‹œìŠ¤í…œ
5. **ë²ˆì—­ íˆìŠ¤í† ë¦¬**: ë²ˆì—­ ì „/í›„ ë¹„êµ ê¸°ëŠ¥
6. **Flutter ì•± ìˆ˜ì •**: ë²ˆì—­ ìƒíƒœ í‘œì‹œ UI

## ğŸ‰ ì™„ë£Œ!

**ìˆ˜ë™ ë²ˆì—­ ì‹œìŠ¤í…œ**ì´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤!

### ì‹œì‘í•˜ê¸°:
1. `.env`ì— Papago API í‚¤ ì¶”ê°€
2. DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
3. ì„œë²„ ë°°í¬
4. ë²ˆì—­ ëŒ€ê¸°ì—´ í™•ì¸ í›„ ì›í•˜ëŠ” ê²Œì„ ë²ˆì—­

ê´€ë¦¬ìê°€ ì§ì ‘ ë²ˆì—­í•  ê²Œì„ì„ ì„ íƒí•˜ì—¬ ë¹„ìš©ê³¼ í’ˆì§ˆì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
